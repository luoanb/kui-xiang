---
description: 最小改动原则
globs: ["**/*"]
alwaysApply: true
---

# 最小改动原则

## 核心原则
- **只修改必要的代码**：仅针对用户需求进行修改，不进行额外的重构或优化
- **保持原有结构**：除非必要，否则不改变代码的现有组织结构和风格
- **避免过度设计**：只解决当前问题，不进行前瞻性的代码改进
- **最小影响范围**：修改时尽量缩小影响范围，避免修改无关的代码和文件

## 实施规则
- 修改代码时，优先使用精确替换，而不是重写整个文件
- 只修改与当前任务直接相关的代码行，避免修改同一文件中的其他部分
- 如果现有代码能够满足需求，即使不够优雅，也应优先使用现有代码
- 除非用户明确要求，否则不进行代码重构、性能优化或代码风格统一
- 添加新功能时，优先扩展现有代码，而不是创建新的架构或模式

## 禁止事项
- 禁止在修复 bug 时进行代码重构
- 禁止在添加功能时修改无关的代码
- 禁止为了代码美观而进行不必要的格式化
- 禁止删除或修改未使用的代码（除非用户明确要求）
- 禁止在完成任务时进行额外的代码优化

## 例外情况
- 如果现有代码存在明显的 bug 或安全问题，可以一并修复
- 如果修改会破坏现有功能，必须进行必要的调整
- 如果用户明确要求进行重构或优化，则不受此原则限制
